# esp32_mouse

## é–¢é€£è¨˜äº‹

https://zenn.dev/kotaproj/articles/esp32_blemouse

https://zenn.dev/kotaproj/articles/esp32_mouse_httpd

## æ¥ç¶šå›³

![](https://storage.googleapis.com/zenn-user-upload/059ffb0e47c8-20220507.png)


## å‹•ä½œ

### ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ã‚¹ã‚¤ãƒƒãƒ


|  ãƒ‡ãƒã‚¤ã‚¹   |        å‹•ä½œ        |    iPadå´ã¸ã®é€ä¿¡    |
| ----------- | ------------------ | -------------------- |
| ğŸ•¹ã‚¹ãƒ†ã‚£ãƒƒã‚¯ | â†/â†’/â†‘/â†“æ“ä½œ        | ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã®ç§»å‹• |
| ğŸ•¹ã‚¹ã‚¤ãƒƒãƒ1  | ãƒ—ãƒƒã‚·ãƒ¥ï¼ãƒªãƒªãƒ¼ã‚¹ | ãƒã‚¦ã‚¹-å·¦ãƒœã‚¿ãƒ³      |
| ã‚¹ã‚¤ãƒƒãƒ2   | ãƒ—ãƒƒã‚·ãƒ¥ï¼ãƒªãƒªãƒ¼ã‚¹ | ãƒã‚¦ã‚¹-å³ãƒœã‚¿ãƒ³      |
| ã‚¹ã‚¤ãƒƒãƒ3   | æŠ¼ä¸‹               | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« UP        |
| ã‚¹ã‚¤ãƒƒãƒ4   | æŠ¼ä¸‹               | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« DOWN      |


### HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ

PCã‹ã‚‰ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¨ãªã‚Šã¾ã™ã€‚
ESP32è‡ªä½“ã¯ã€ãƒ—ã‚¢ãªç’°å¢ƒã®ãŸã‚ã€HTTPã®GETãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿ã§å®Ÿè£…ã¨ã—ã¾ã—ãŸã€‚

| query  |   value    |             èª¬æ˜             |
| ------ | ---------- | ---------------------------- |
| code   | click      | ã‚¯ãƒªãƒƒã‚¯å‹•ä½œ                 |
| -      | move       | ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹• or ãƒ›ã‚¤ãƒ¼ãƒ«å‹•ä½œ |
| -      | press      | ãƒã‚¦ã‚¹ãƒœã‚¿ãƒ³ãƒ€ã‚¦ãƒ³å‹•ä½œ       |
| -      | release    | ãƒã‚¦ã‚¹ãƒœã‚¿ãƒ³ã‚¢ãƒƒãƒ—å‹•ä½œ       |
| type   | left       | å·¦ã‚¯ãƒªãƒƒã‚¯                   |
| -      | right      | å³ã‚¯ãƒªãƒƒã‚¯                   |
| -      | middle     | ç¬¬3ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯            |
| -      | back       | æˆ»ã‚‹                         |
| -      | forward    | é€²ã‚€                         |
| linear | 0          | ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹• - é›¢æ•£å‹•ä½œ      |
| -      | 1          | ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹• - é€£ç¶šå‹•ä½œ      |
| x      | æ•´æ•°       | æ°´å¹³æ–¹å‘ã®ç§»å‹•é‡             |
| y      | æ•´æ•°       | å‚ç›´æ–¹å‘ã®ç§»å‹•é‡             |
| wheel  | -128 - 127 | ãƒ›ã‚¤ãƒ¼ãƒ«ç§»å‹•é‡               |
| step   | æ•´æ•°(>0)   | é€£ç¶šå‹•ä½œæ™‚ã®ç§»å‹•é‡           |
| delay  | æ•´æ•°(>0)   | é€£ç¶šå‹•ä½œæ™‚ã®é…å»¶é‡(msec)     |

- ä¾‹:ã‚·ãƒ³ã‚°ãƒ«ã‚¿ãƒƒãƒ—ã‚’å®Ÿæ–½
```
GET http://{IP Address}/mouse?code=click&type=left
```
- ä¾‹:æ°´å¹³æ–¹å‘-100, å‚ç›´æ–¹å‘+100ç§»å‹•
```
http://{IP Address}/mouse?code=move&x=-100&y=100
```


## ã‚¿ã‚¹ã‚¯æ§‹æˆ

|           ã‚¿ã‚¹ã‚¯å           |                            å½¹å‰²                            |
| ---------------------------- | ---------------------------------------------------------- |
| ã‚¹ã‚¤ãƒƒãƒç›£è¦–ã‚¿ã‚¤ãƒãƒ¼         | ã‚¹ã‚¤ãƒƒãƒã®DOWN/UPã®å¤‰åŒ–ã‚’ç›£è¦–ã™ã‚‹                          |
| ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ç›£è¦–ã‚¿ã‚¤ãƒãƒ¼ | ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®å¤‰åŒ–ã‚’ç›£è¦–ã™ã‚‹                           |
| HTTPdç®¡ç†ã‚¿ã‚¹ã‚¯              | Webã‚µãƒ¼ãƒã®èµ·å‹•åŠã³ã‚¯ã‚¨ãƒªãƒ¼ã‚’å‡¦ç†ã™ã‚‹(ã“ã“ãŒè¿½åŠ )                      |
| ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚¿ã‚¹ã‚¯         | ã‚¹ã‚¤ãƒƒãƒï¼ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ç®¡ç†ã«é€šçŸ¥ |
| ãƒã‚¦ã‚¹ç®¡ç†ã‚¿ã‚¹ã‚¯             | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‹ã‚‰å—ã‘ãŸã‚¤ãƒ™ãƒ³ãƒˆã‚’Bleãƒã‚¦ã‚¹åˆ¶å¾¡ã‚’é€ä¿¡      |



```mermaid
graph LR

    actor((Actor)) -->|æ“ä½œ| SW(ã‚¹ã‚¤ãƒƒãƒç›£è¦–ã‚¿ã‚¤ãƒãƒ¼)
    actor((Actor)) -->|æ“ä½œ| JS(ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ç›£è¦–ã‚¿ã‚¤ãƒãƒ¼)
    pc((PC)) -->|GET Method| HD(HttpDç®¡ç†ã‚¿ã‚¹ã‚¯)

    subgraph ESP32
        SW(ã‚¹ã‚¤ãƒƒãƒç›£è¦–ã‚¿ã‚¤ãƒãƒ¼) -->|SendQueue| CTL(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚¿ã‚¹ã‚¯)
        JS(ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ç›£è¦–ã‚¿ã‚¤ãƒãƒ¼) -->|SendQueue| CTL(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚¿ã‚¹ã‚¯)
        HD(HttpDç®¡ç†ã‚¿ã‚¹ã‚¯) -->|SendQueue| CTL(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚¿ã‚¹ã‚¯)
        CTL(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚¿ã‚¹ã‚¯) -->|SendQueue| MOUSE(ãƒã‚¦ã‚¹ç®¡ç†ã‚¿ã‚¹ã‚¯)
    end

    MOUSE(ãƒã‚¦ã‚¹ç®¡ç†ã‚¿ã‚¹ã‚¯) -->|ble| ipad((iPad))
```

# å‚è€ƒ

è©³ç´°ã¯ä¸‹è¨˜ã«è¨˜è¼‰ã—ã¦ã‚ã‚Šã¾ã™ã€‚

https://zenn.dev/kotaproj/articles/esp32_blemouse